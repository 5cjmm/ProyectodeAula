<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopMaster - Predicción de Precios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Resaltar inputs cuando el placeholder está visible (input vacío) */
        input:placeholder-shown,
        textarea:placeholder-shown {
            border-color: #2563eb !important; /* blue-600 */
            box-shadow: 0 0 0 4px rgba(37,99,235,0.08);
        }

        /* Hacer los bordes un poco más visibles por defecto */
        input, select, textarea {
            border-width: 1.5px;
        }

        /* Placeholder más legible */
        input::placeholder, textarea::placeholder {
            color: #6b7280; /* gray-500 */
            opacity: 1;
        }

        /* Mantener estilo azul al enfocar */
        input:focus, select:focus, textarea:focus {
            border-color: #2563eb !important;
            box-shadow: 0 0 0 4px rgba(37,99,235,0.12);
            outline: none;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-50">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 p-6">
            <div class="flex flex-col items-center mb-10">
                <div class="p-4 rounded-xl shadow-sm border border-gray-100">
                    <img th:src="@{/images/logo.png}" alt="ShopMaster"
                        class="h-28 w-auto object-contain drop-shadow-md">
                </div>
            </div>

            <input type="hidden" id="tiendaId" th:value="${tiendaId}">
            <nav class="space-y-2">
                <a id="linkDashboard"
                    class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                    </svg>
                    Dashboard
                </a>

                <a id="linkInventario"
                    class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Inventario
                </a>

                <a id="linkProveedores"
                    class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3z" />
                    </svg>
                    Proveedores
                </a>

                <a id="linkDeudas" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    Deudas
                </a>

                <a id="linkPuntoVenta"
                    class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    Punto de Venta
                </a>

                <a id="linkInforme" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    Informe de Ventas
                </a>

                <a id="linkPrediccion" class="flex items-center gap-3 px-3 py-2 bg-cyan-50 text-cyan-700 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 3h14v2H3V3zm0 4h10v2H3V7zm0 4h6v2H3v-2z" />
                    </svg>
                    Predicción
                </a>

                <a id="linkTiendas" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                    </svg>
                    Tiendas
                </a>

                <a href="/logout" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                    </svg>
                    Cerrar sesión
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <header class="bg-white border-b border-gray-200 shadow-sm">
                <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
                    <h1 class="text-xl font-semibold text-gray-800">Módulo de Predicción</h1>
                    <div class="flex items-center gap-3">
                        <img src="/admin-avatar.png" alt="Admin" class="w-9 h-9 rounded-full border-2 border-gray-300">
                        <span class="text-sm font-medium text-gray-700">Administrador</span>
                    </div>
                </div>
            </header>

            <!-- Contenido del módulo de predicción -->
            <main class="flex-1 p-6 space-y-6">
                <div class="bg-white shadow-md rounded-xl p-6 border border-blue-200 focus:ring-cyan-500 focus:border-cyan-500 transition">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 16 16">
                                <g fill="#4094d4">
                                    <path d="M15 13v1H1.5l-.5-.5V0h1v13z" />
                                    <path
                                        d="M13 3.207L7.854 8.354h-.708L5.5 6.707l-3.646 3.647l-.708-.708l4-4h.708L7.5 7.293l5.146-5.147h.707l2 2l-.707.708z" />
                                </g>
                            </svg>
                            Predicción de Precios
                        </h2>
                    </div>

                    <form id="priceForm" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Producto:</label>
                            <select id="productSelect" name="product"
                                class="w-full border-gray-300 rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500 transition">
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Año inicial (opcional):</label>
                            <input type="number" id="startYear" name="startYear" placeholder="Ej: 2025"
                                class="w-full border-gray-300 rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500 transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Horizonte (años):</label>
                            <input type="number" id="years" name="years" value="3" min="1"
                                class="w-full border-gray-300 rounded-lg p-2.5 focus:ring-cyan-500 focus:border-cyan-500 transition">
                        </div>

                        <div class="md:col-span-3 flex justify-end">
                            <button type="submit"
                                class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-10 rounded-lg transition-all duration-200 transform hover:scale-[1.02] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Predecir precio
                            </button>
                        </div>
                    </form>

                    <div id="result" class="hidden mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6 shadow-inner">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Resultados de la Predicción</h3>
                        <div class="w-full flex justify-center">
                            <canvas id="priceChart" class="w-full max-w-3xl"></canvas>
                        </div>
                        <div id="predictionsList" class="mt-4"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="/script.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const tiendaId = document.getElementById("tiendaId").value;

            document.getElementById("linkDashboard").href = `/admin/tiendas/${tiendaId}/dashboard`;
            document.getElementById("linkInventario").href = `/admin/tiendas/${tiendaId}/inventario`;
            document.getElementById("linkProveedores").href = `/admin/tiendas/${tiendaId}/proveedores`;
            document.getElementById("linkDeudas").href = `/admin/tiendas/${tiendaId}/deudas`;
            document.getElementById("linkPuntoVenta").href = `/admin/tiendas/${tiendaId}/puntoventa`;
            document.getElementById("linkInforme").href = `/admin/tiendas/${tiendaId}/informe`;
            document.getElementById("linkPrediccion").href = `/admin/tiendas/${tiendaId}/prediccion`;
            document.getElementById("linkTiendas").href = `/admin/tiendas`;
        });
    </script>
</body>

</html>